<!--
Copyright 2014 The Toolkitchen Authors. All rights reserved.
Use of this source code is governed by a BSD-style
license that can be found in the LICENSE file.
-->

<link rel="import" href="../polymer-selector/polymer-selector.html">
<link rel="import" href="paper-calculator-keygrid.html">
<link rel="import" href="paper-calculator-panels.html">

<polymer-element name="paper-calculator-keypad" attributes="wideMode standardKeys advancedKeys modeKeys level">

  <template>

    <style>
    
      :host {
        display: block;
        position: relative;
        cursor: pointer;
        overflow: hidden;
      }
      
      paper-calculator-panels {
        width: 100%;
        height: 100%;
        background-color: #1de9b6;
        cursor: pointer;
      }
      
      #standard {
        background-color: #4c4c4c;
        font-weight: 300;
        font-size: 2em;
        color: #fff;
      }
      
      #standard ^ .column:nth-of-type(4) {
        background-color: #666;
        border-left: 1px solid #444;
      }
      
      .level1 #standard {
         box-shadow: inset 0 8px 6px rgba(0, 0, 0, 0.3);
      }
      
      .level2 #standard {
         box-shadow: inset 0 11px 8px rgba(0, 0, 0, 0.3);
      }
      
      #advanced {
        background-color: #40bd9e;
        font-weight: 400;
        font-size: 1.125em;
        color: #f7f7f7;
      }
      
      #mode {
        background-color: #1de9b6;
        font-weight: 400;
        font-size: 1em;
        color: #777;
      }
      
      #advanced, #mode {
        box-shadow: -3px 0 3px -3px rgba(0, 0, 0, 0.25);
      }
      
      #advanced.dragging, paper-calculator-panels.narrow-layout #advanced.opened {
        box-shadow: -4px 0 4px rgba(0, 0, 0, 0.25);
      }
      
      .level2 #advanced.dragging, paper-calculator-panels.narrow-layout.level2 #advanced.opened {
        box-shadow: -4px 0 4px rgba(0, 0, 0, 0.25), inset 0 9px 8px rgba(0, 0, 0, 0.25);
      }
      
      #mode.dragging, paper-calculator-panels.narrow-layout #mode.opened {
        box-shadow: -4px 0 4px rgba(0, 0, 0, 0.25);
      }
      
      .step.dragging {
        transition: none;
      }
      
      #standard ^^ paper-ink ^ #inkInner {
        background-color: #4c4c4c;
      }
      
      #advanced ^^ paper-ink ^ #inkInner {
        background-color: #40bd9e;
      }
      
      #mode ^^ paper-ink ^ #inkInner {
        background-color: #1de9b6;
      }
      
    </style>
    
    <paper-calculator-panels class="{{wideMode ? 'wide-layout' : 'narrow-layout'}} level{{level}}" selected="{{level}}" wideMode="{{wideMode}}">
    
      <paper-calculator-keygrid id="standard" flex="1" keys="{{standardKeys}}"></paper-calculator-keygrid>
    
      <paper-calculator-keygrid id ="advanced" flex="0.75" keys="{{advancedKeys}}"></paper-calculator-keygrid>
      
      <paper-calculator-keygrid id="mode" flex="0.182" keys="{{modeKeys}}"></paper-calculator-keygrid>
      
    </paper-calculator-panels>
    
  </template>

  <script>

    Polymer('paper-calculator-keypad', {
      
      findKey: function(label) {
        var ps = [this.$.standard, this.$.advanced, this.$.mode];
        for (var i = 0, p; p = ps[i]; i++) {
          var key = p.findKey(label);
          if (key) {
            return key;
          }
        }
      },
      
      get equalKey() {
        return this.$.standard.findKey('=');
      }
      
    });

  </script>

</polymer-element>